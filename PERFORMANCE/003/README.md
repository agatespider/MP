# 성능 테스트

## 1. 성능 테스트 유형
기획, 분석, 설계, 개발, 테스트 단계에서 해야할 성능 테스트 단계

### 1.1 [성능] 시스템 성능 목표 달성 여부 평가 (설계, 개발, 테스트)
TPS, 응답시간, 자원 사용률의 만족 여부를 평가하기 위한 기본적인 테스트

### 1.2 [과부하] 한계 성능 평가, 부족 자원 확인 (설계, 개발, 테스트)
과부하 상황에서 시스템의 성능 저하 패턴을 분석해 한계 성능을 평가, 한계 상황에서 성능 저하나 장애의 주 요인이 되는 자원들을 확인한다.

### 1.3 [안정성] 응답시간, 자원 사용률 안정성 평가 (설계, 개발, 테스트)
적정 부하에서 24시간 이상 지속적으로 테스트를 수행해 응답시간, 자원 사용율이 초기와 같이 일정한지 확인, 처리 데이터 누적과, 메모리 누수가 발생 할 수 있어 미리 확인하고 조치하기 위해 수행하는 테스트

### 1.4 [최적화] 성능 개선 (설계, 개발, 테스트)
어플리케이션 튜닝과 시스템 구성 요소를 수정해 가면서 테스트. 영향도를 정확하게 평가하기 위해서 한번 수행시 한가지 항목만 적용 해야한다.

### 1.5 [가용성] 일부 시스템 장애시 서비스 가능성 평가 (설계, 개발, 테스트)
서버나 네트워크 장비등에서 장애가 발생했을 때 처리 데이터 누락없이 지속적으로 서비스가 가능한지 여부를 평가한다.

### 1.6 [실사용자] 실제 성능 평가, 추가 개선 대상 도출 (테스트)
실 사용자가 일정 시간 동안 일상 업무 처리 패턴에 따라 신규 시스템을 사용함으로써 실제 오픈시의 성능을 미리 확인하고 추가 개선 대상을 도출한다.

### 1.7 [벤치마크] 소프트웨어나 하드웨어 비교 평가 (기획)
여러 제품에 대해 성능 우수성을 비교 평가하기 위해 수행하는 테스트, 시스템 구축전 제품 선정을 위해 실시한다.

### 1.8 [파일럿] 설계 아키텍처 검증 (분석, 설계)
실제 본개발이 들어가기 전에 설계된 아키텍처의 기능과 성능을 검증하는 테스트, 중요기능별로 몇 가지 업무를 미리 개발해서 검증하는 과정을 통해 아키텍처를 개선하며, 개발자에게 제공할 각종 설치 가이드, 개발 가이드, 성능 가이드 등을 보완한다.

파일럿 테스트시에 성능, 안정성, 과부하 테스트등이 진행된다.

## 2. 성능 테스트 구성 요소

### 2.1 부하 모델
업무 시나리오, 테스트 데이터, 적용 부하에 대한 종합 적인 설계 모델 성능 테스트 핵심 부분.

### 2.2 업무 시나리오
부하 발생에 사용할 업무의 종류와 비중을 설계한 시나리오, 최대 부하 시 실제 발생한 업무 비중을 기준으로 도출

예를 들면 A 업무 40%, B 업무 30%, C 업무 20%, D/E업무 5%씩 처럼 TPS기준으로 업무 시나리오 작성, 업무 비중이 작아도 누락하지 말아야 한다.

### 2.3 테스트 데이터
데이터는 DB안의 시스템 데이터와 화면에서 요청시 발생하는 스크립트 데이터로 나뉘며 각각의 양에따라 성능 측정 결과가 달라진다.

### 2.4 적용 부하
업무 시나리오 비중을 유지하면서 발생시킬 업무 TPS를 의미한다. 현재나 미래에 발생할 최대 부하시 TPS를 적용 부하로 보통 설정한다. 또한 평상시부하, 최대 부하, 최대부하의 150% 과부하를 측정한다.

### 2.5 테스트 환경
테스트는 기본적으로 운영 환경에서 진행하는 것이 원칙이다.

### 2.6 평가 기준
TPS, 응답시간, 자원 사용율에 대한 목표 성능 달성 여부 판단. 고객과 부하 모델에 관해 사전협의가 필요.

### 2.7 측정 항목
성능 평가 기준에 대한 만족 여부를 판단할 수 잇는 평가용 측정 항목과 성능 저하시 발생 위치와 원인을 판단할 분석용 측정자료. 측정 항목이 결정나면 방안 수립 및 도구 설치등의 후속작업이 따른다.

### 2.8 부하 발생기
성능 테스트 도구를 사용해서 부하 모델에 따라 가상 사용자가 업무를 수행하는 장비를 뜻하며 예전엔 서버급 장비를 부하 발생기로 사용했지만 요새는 노트북으로도 쓴다.

### 2.9 가상 사용자
부하 발생기내에서 실 사용자가 업무를 수행하는 것처럼 시나리오에 따라 테스트 대상 시스템에 서비스 요청을 보내고 응답을 받는 역할을 하는 것을 가상 사용자라 한다. 보통 부하 발생기에서 한개의 프로세스나 스레드가 된다.

### 2.10 테스트 스크립트
가상의 사용자가 수행할 업무를 코드형태로 작성한 스크립트 파일.

## 3. 성능 테스트시 주의사항
성능 테스트에서 이상이 없다 하더라도 운영시점에 문제가 발생 할 수도 있다. 이런 불상사를 막기 위해 고려해야 할 상황은 성능 테스트의 여러 제반 환경과 조건이 실제 운영 환경과 동일해야 한다는 점이다.

### 3.1 테스트 데이터
#### 3.1.1 시스템 데이터 (데이터 대상 DB)
데이터 양이 운영과 동일한지 확인한다. 데이터 소량시 디스크 I/O가 일어나야 하는데 모두 메모리에 적재되서 빠르게 보이기 때문이다.

#### 3.1.2 스크립트 데이터 (입력용 데이터)
스크립트 데이터양을 작게 하지 말자. 데이터 소량시 실재 사용 데이터들이 메모리에 캐쉬되므로써 빠르게 보이기 때문이다.

#### 3.1.3 초기 데이터 제로 테이블
초기 데이터가 적을 경우 빠르지만 데이터가 쌓여가면서 성능저하가 발생한다. 운영하면서 건수가 크게 증가하는 테이블은 DBA에게 요청해 데이터가 쌓여있을 때의 통계정보로 테이블 통계정보를 변경해달라고 요청해야한다.

### 3.2 화면 처리시간











